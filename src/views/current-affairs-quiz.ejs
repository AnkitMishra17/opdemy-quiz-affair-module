<%- include("partials/header.ejs") %>
<link rel="stylesheet" href="../../public/formstyles.css">

<style>
   .banner-bg{
    background-image: url('../../public/study.jpg');
    height: 600px;
    background-attachment: fixed;
    background-size: cover;
    background-repeat: no-repeat;
}
.questions{
   box-shadow: 0 0 20px 0 rgba(72,94,116,0.7);
}
@media only screen and (max-width: 768px){
     .banner-bg{
        background-image: url('../../public/study.jpg');
        height: 250px;
        background-attachment: fixed;
        background-size: contain;
        background-repeat: no-repeat;
    }
}
</style>

<section class="banner-bg">
</section>
<h1 class="text-center mt-5">Take Current Affairs Quiz <i class="em em-smiley"></i></h1>
<div class="container d-flex flex-column justify-content-center p-5">
<div class="row">
    <% for(let i = 0; i < data.length; i++) {  %>
      <div class="col-md-6 ">
            <div class="card questions border-primary mb-3">
                  <h3 class="card-header bg-primary text-white">question <%= i+1%></h3>
                  <div class="card-body">
                    <p class="card-text font-weight-bold" style="font-size: 20px"><%= data[i].question %></p>
                  </div>
                  <ul class="list-group list-group-flush font-weight-bold" style="font-size: 17px">
                    <li class="list-group-item">(A) <%= data[i].optiona %></li>
                    <li class="list-group-item">(B) <%= data[i].optionb %></li>
                    <li class="list-group-item">(C) <%= data[i].optionc %></li>
                    <li class="list-group-item">(D) <%= data[i].optiond %></li>
                  </ul>
            </div>
      </div>
       <% } %>
      </div> 
       <br>
       <button type="submit" id="submit" class="btn btn-success mb-5 w-50">View Answers</button>

       <div class="card questions border-primary mb-3" id="card" style="display:none;">
        <h3 class="card-header bg-primary text-white">Correct Answers</h3>
        <ul class="list-group list-group-flush font-weight-bold" id="result" style="font-size: 14px">
        </ul>
  </div>
</div>       
	
<script>
  $(document).ready(function(){  
  answerkey = "<%= answers %>";
  optiona = "<%= optiona %>";
  optionb = "<%= optionb %>";
  optionc = "<%= optionc %>";
  optiond = "<%= optiond %>";
  answerkey = answerkey.toString().split(',');
  optiona = optiona.toString().split(',');
  optionb = optionb.toString().split(',');
  optionc = optionc.toString().split(',');
  optiond = optiond.toString().split(',');
  $("#submit").one('click',(e)=>{
    $("#card").fadeIn();
      for(let i = 0; i < answerkey.length; i++ ){
            var x = answerkey[i];
            let choices = $('.choices');
              switch (x) {
                case "A":
                   $("#result").append(`<li class="list-group-item">${i+1}) ${optiona[i]}</li>`);
                   break;
                case "B":
                   $("#result").append(`<li class="list-group-item">${i+1}) ${optionb[i]}</li>`);
                   break;
                case "C":
                   $("#result").append(`<li class="list-group-item">${i+1}) ${optionc[i]}</li>`);
                   break;
                case "D":
                   $("#result").append(`<li class="list-group-item">${i+1}) ${optiond[i]}</li>`);
                   break;
            }
      }
    $("#submit").prop('disabled',true);
  }); 
});
</script>
<%- include("partials/footer.ejs") %>