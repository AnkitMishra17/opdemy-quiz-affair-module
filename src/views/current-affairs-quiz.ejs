<%- include("partials/header.ejs") %>

<style>
   .banner-bg{
    background-image: url('../../public/study.jpg');
    height: 600px;
    background-attachment: fixed;
    background-size: cover;
    background-repeat: no-repeat;
}
.questions{
   box-shadow: 0 0 20px 0 rgba(72,94,116,0.7);
}
@media only screen and (max-width: 768px){
     .banner-bg{
        background-image: url('../../public/study.jpg');
        height: 250px;
        background-attachment: fixed;
        background-size: contain;
        background-repeat: no-repeat;
    }
}
</style>

<section class="banner-bg">
</section>
<h1 class="text-center mt-5">Take Current Affairs Quiz <i class="em em-smiley"></i></h1>
<div class="container d-flex flex-column justify-content-center p-5">
<div class="row">
    <% for(let i = 0; i < question.length; i++) {  %>
      <div class="col-md-6 ">
            <div class="card question border-primary mb-3">
                  <h3 class="card-header bg-primary text-white">question <%= i+1%></h3>
                  <div class="card-body">
                      <% if(question[i].includes("\n")) { %>
                        <% let split = question[i].split("\n"); %>
                        <% for(let j = 0; j < split.length; j++) {  %>
                            <p class="card-text font-weight-bold" style="font-size: 20px"><%= split[j] %></p>
                        <% } %>
                      <% }else { %>
                    <p class="card-text font-weight-bold" style="font-size: 20px"><%= question[i] %></p>
                  <% } %>
                  </div>
                  <ul class="list-group list-group-flush font-weight-bold" style="font-size: 14px">
                      <input type="radio" class="radiobtn" name="question<%= i+1 %>" value="A" class="text-dark" > <input class="choices" type="text" value="<%= optiona[i] %>" disabled>
                      <input type="radio" class="radiobtn" name="question<%= i+1 %>" value="B" class="text-dark" > <input class="choices" type="text" value="<%= optionb[i] %>" disabled>
                      <input type="radio" class="radiobtn" name="question<%= i+1 %>" value="C" class="text-dark" > <input class="choices" type="text" value="<%= optionc[i] %>" disabled>
                      <input type="radio" class="radiobtn" name="question<%= i+1 %>" value="D" class="text-dark" > <input class="choices" type="text" value="<%= optiond[i] %>" disabled>
                  </ul>
            </div>
      </div>
       <% } %>
</div> 
      <br>
      <button type="submit" id="submit" class="btn btn-success mb-5 w-50">View Answers</button>

      <div class="card border-primary mb-3" id="card" style="display:none;">
      <h3 class="card-header bg-primary text-white">Correct Answers</h3>
      <ul class="list-group list-group-flush font-weight-bold" id="result" style="font-size: 14px">
      </ul>
  </div>
  <div class="append"></div>
  
  <div class="row output"></div> 
</div>       
	
<script>
  $(document).ready(function(){
  questions = `<%= question %>`;
  answerkey = "<%= answers %>";
  optiona = "<%= optiona %>";
  optionb = "<%= optionb %>";
  optionc = "<%= optionc %>";
  optiond = "<%= optiond %>";
  questions = questions.toString().split(',');
  answerkey = answerkey.toString().split(',');
  optiona = optiona.toString().split(',');
  optionb = optionb.toString().split(',');
  optionc = optionc.toString().split(',');
  optiond = optiond.toString().split(',');
  console.log(questions);

  let j = 0;
  $(".output").append(`
          <div class="col-md-6">
            <div class="card question border-primary mb-3">
                  <h3 class="card-header bg-primary text-white">question ${j+2}</h3>
                  <div class="card-body questions">
                    
                  </div>
                  <ul class="list-group list-group-flush font-weight-bold" style="font-size: 14px">
                      <input type="radio" class="radiobtn" name="question${j+2}" value="A" class="text-dark" > <input class="choices" type="text" value="${optiona[j]}" disabled>
                      <input type="radio" class="radiobtn" name="question${j+2}" value="B" class="text-dark" > <input class="choices" type="text" value="${optionb[j]}" disabled>
                      <input type="radio" class="radiobtn" name="question${j+2}" value="C" class="text-dark" > <input class="choices" type="text" value="${optionc[j]}" disabled>
                      <input type="radio" class="radiobtn" name="question${j+2}" value="D" class="text-dark" > <input class="choices" type="text" value="${optiond[j]}" disabled>
                  </ul>
            </div>
          </div>`);

          let k = 0;
            if(questions[k].includes("\n")){
              split = questions[k].split("\n");
              
          for(i=0;i< split.length;i++){
            $(".questions").append(`<p class="card-text font-weight-bold" style="font-size: 20px">${split[i]}</p>`);
          }
              console.log(split);
            }else{
              $(".questions").append(`<p class="card-text font-weight-bold" style="font-size: 20px">${questions[k]}</p>`);
            }


// $(".output").html(``);





















  $('#click').on('click',(e)=>{
    console.log('working')
  })
  $("#submit").one('click',(e)=>{
    $("#card").fadeIn();
      for(let i = 0; i < answerkey.length; i++ ){
            var x = answerkey[i];
            let choices = $('.choices');
              switch (x) {
                case "A":
                   $("#result").append(`<li class="list-group-item">${i+1}) ${optiona[i]}</li>`);
                   break;
                case "B":
                   $("#result").append(`<li class="list-group-item">${i+1}) ${optionb[i]}</li>`);
                   break;
                case "C":
                   $("#result").append(`<li class="list-group-item">${i+1}) ${optionc[i]}</li>`);
                   break;
                case "D":
                   $("#result").append(`<li class="list-group-item">${i+1}) ${optiond[i]}</li>`);
                   break;
            }
      }
    $("#submit").prop('disabled',true);
  }); 
});
</script>
<%- include("partials/footer.ejs") %>